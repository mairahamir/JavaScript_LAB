<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shopping Cart System</title>
</head>
<body>
    <h2>Shopping Cart System</h2>

    <h2>Products</h2>
    <div id="products"></div>

    <h2>Cart</h2>
    <div id="cart"></div>

    <h2>Total : <span id="total">0</span></h2>

    <script>
        // 1. Products array
        var product = [
            {id:1, name:"laptop", price:50000},
            {id:2, name:"speaker", price:1000},
            {id:3, name:"mouse", price:300},
            {id:4, name:"keyboard", price:1500},
            {id:5, name:"usb", price:700},
            {id:6, name:"charger", price:300},
            {id:7, name:"mobile", price:100000},
            {id:8, name:"airpods", price:5000},
            {id:9, name:"cpu", price:50000}
        ];

        // 2. Cart array, load from localStorage if available
        var cart = JSON.parse(localStorage.getItem("cart")) || [];

        // 3. Display products
        function showProducts() {
            var productList = document.getElementById('products');
            productList.innerHTML = "";

            product.forEach(function(prod) {
                productList.innerHTML += `
                    <div>
                        <p>${prod.name} Rs:${prod.price}</p>
                        <button onclick="addtocart(${prod.id})">Add To Cart</button>
                    </div>
                `;
            });
        }

        // 4. Add to cart
        function addtocart(id) {
            var item = cart.find(p => p.product.id === id);
            if(item){
                item.quantity++; // agar product already cart me hai tou quantity barhao
            } else {
                var pro = product.find(p => p.id === id);
                cart.push({product: pro, quantity: 1}); // new product cart me add karo
            }
            saveCart(); // localStorage update karo
            showcart(); // cart display update karo
        }

        // 5. Increase quantity
        function increase(id) {
            var item = cart.find(p => p.product.id === id);
            if(item) item.quantity++;
            saveCart();
            showcart();
        }

        // 6. Decrease quantity
        function decrease(id) {
            var item = cart.find(p => p.product.id === id);
            if(item) {
                item.quantity--;
                if(item.quantity === 0){
                    cart = cart.filter(p => p.product.id != id); // agar quantity 0 ho tou remove karo
                }
            }
            saveCart();
            showcart();
        }

        // 7. Show cart and calculate total
        function showcart() {
            var cartdiv = document.getElementById("cart");
            cartdiv.innerHTML = "";
            var total = 0;

            cart.forEach(function(item){
                total += item.product.price * item.quantity;
                cartdiv.innerHTML += `
                    <div>
                        <p>${item.product.name} -- Rs: ${item.product.price}</p>
                        <button onclick="increase(${item.product.id})">+</button>
                        <span>${item.quantity}</span>
                        <button onclick="decrease(${item.product.id})">-</button>
                    </div>
                `;
            });

            document.getElementById("total").innerText = total;
        }

        // 8. Save cart to localStorage
        function saveCart() {
            localStorage.setItem("cart", JSON.stringify(cart)); // cart ko localStorage me save karo
        }

        // 9. Initialize
        showProducts();
        showcart();
    </script>
</body>
</html>
